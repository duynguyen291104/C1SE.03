# HÆ°á»›ng Dáº«n Sá»­ Dá»¥ng Camera vÃ  Microphone trong Live Class

## ğŸ¥ Chá»©c nÄƒng Ä‘Ã£ hoÃ n thiá»‡n

### âœ… Báº­t/Táº¯t Camera
- **Biá»ƒu tÆ°á»£ng:** ğŸ“¹ (ON) / ğŸ“· (OFF)
- **Vá»‹ trÃ­:** Thanh Ä‘iá»u khiá»ƒn á»Ÿ giá»¯a dÆ°á»›i cÃ¹ng video area
- **Hoáº¡t Ä‘á»™ng:**
  - Click Ä‘á»ƒ báº­t/táº¯t camera
  - Khi táº¯t: Hiá»ƒn thá»‹ placeholder vá»›i avatar vÃ  text "CAMERA OFF"
  - Khi báº­t: Hiá»ƒn thá»‹ video stream tá»« camera
  - Tá»± Ä‘á»™ng thÃ´ng bÃ¡o cho cÃ¡c thÃ nh viÃªn khÃ¡c trong phÃ²ng

### âœ… Báº­t/Táº¯t Microphone
- **Biá»ƒu tÆ°á»£ng:** ğŸ¤ (ON) / ğŸ”‡ (OFF)
- **Vá»‹ trÃ­:** Thanh Ä‘iá»u khiá»ƒn á»Ÿ giá»¯a dÆ°á»›i cÃ¹ng video area
- **Hoáº¡t Ä‘á»™ng:**
  - Click Ä‘á»ƒ báº­t/táº¯t microphone
  - Hiá»ƒn thá»‹ icon ğŸ”‡ trÃªn video tile khi mic táº¯t
  - Tá»± Ä‘á»™ng thÃ´ng bÃ¡o cho cÃ¡c thÃ nh viÃªn khÃ¡c trong phÃ²ng

### âœ… Chia Sáº» MÃ n HÃ¬nh
- **Biá»ƒu tÆ°á»£ng:** ğŸ–¥ï¸
- **Vá»‹ trÃ­:** Thanh Ä‘iá»u khiá»ƒn á»Ÿ giá»¯a dÆ°á»›i cÃ¹ng video area
- **Hoáº¡t Ä‘á»™ng:**
  - Click Ä‘á»ƒ báº¯t Ä‘áº§u/dá»«ng chia sáº» mÃ n hÃ¬nh
  - Chá»‰ teacher cÃ³ thá»ƒ chia sáº» mÃ n hÃ¬nh

## ğŸ¨ Giao Diá»‡n Äiá»u Khiá»ƒn

### Thanh Ä‘iá»u khiá»ƒn (Video Controls)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ¤    ğŸ“¹    ğŸ–¥ï¸   ğŸŸ¢ ÄÃ£ káº¿t ná»‘i            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**MÃ u sáº¯c:**
- ğŸŸ¢ **Xanh lÃ¡** (Active): Chá»©c nÄƒng Ä‘ang Báº¬T
- ğŸ”´ **Äá»** (Inactive): Chá»©c nÄƒng Ä‘ang Táº®T

**Hiá»‡u á»©ng:**
- Hover: Scale lá»›n hÆ¡n + hiá»ƒn thá»‹ tooltip
- Click: Scale nhá» láº¡i (feedback)
- Gradient background Ä‘áº¹p máº¯t

## ğŸ”§ CÃ¡ch Sá»­ Dá»¥ng

### 1. Khi VÃ o PhÃ²ng Láº§n Äáº§u

**Máº·c Ä‘á»‹nh:**
- âŒ Camera: Táº®T
- âŒ Microphone: Táº®T

**LÃ½ do:**
- Báº£o máº­t privacy
- Cho phÃ©p ngÆ°á»i dÃ¹ng chuáº©n bá»‹ trÆ°á»›c khi báº­t

### 2. Báº­t Camera

**BÆ°á»›c 1:** Click vÃ o nÃºt ğŸ“· (camera OFF)
**BÆ°á»›c 2:** TrÃ¬nh duyá»‡t yÃªu cáº§u quyá»n truy cáº­p camera
**BÆ°á»›c 3:** Cho phÃ©p â†’ Camera báº­t âœ…
**Káº¿t quáº£:** 
- NÃºt chuyá»ƒn sang ğŸ“¹ mÃ u xanh
- Video stream hiá»ƒn thá»‹
- CÃ¡c thÃ nh viÃªn khÃ¡c tháº¥y video cá»§a báº¡n

### 3. Báº­t Microphone

**BÆ°á»›c 1:** Click vÃ o nÃºt ğŸ”‡ (mic OFF)
**BÆ°á»›c 2:** TrÃ¬nh duyá»‡t yÃªu cáº§u quyá»n truy cáº­p microphone
**BÆ°á»›c 3:** Cho phÃ©p â†’ Microphone báº­t âœ…
**Káº¿t quáº£:**
- NÃºt chuyá»ƒn sang ğŸ¤ mÃ u xanh
- Icon ğŸ”‡ trÃªn video tile biáº¿n máº¥t
- CÃ¡c thÃ nh viÃªn khÃ¡c nghe Ä‘Æ°á»£c giá»ng nÃ³i cá»§a báº¡n

### 4. Táº¯t Camera/Microphone

**CÃ¡ch 1:** Click láº¡i vÃ o nÃºt Ä‘ang active
**CÃ¡ch 2:** Teacher cÃ³ thá»ƒ force mute students

## ğŸ¯ TÃ­nh NÄƒng NÃ¢ng Cao

### 1. Tá»± Äá»™ng ThÃªm Track

Náº¿u báº¡n:
- ÄÃ£ cÃ³ stream vá»›i AUDIO nhÆ°ng chÆ°a cÃ³ VIDEO
- Báº­t camera â†’ Tá»± Ä‘á»™ng thÃªm video track vÃ o stream hiá»‡n táº¡i
- KhÃ´ng cáº§n táº¡o stream má»›i

TÆ°Æ¡ng tá»± vá»›i microphone.

### 2. WebRTC P2P

- Stream Ä‘Æ°á»£c chia sáº» trá»±c tiáº¿p giá»¯a cÃ¡c peer
- KhÃ´ng qua server (giáº£m Ä‘á»™ trá»…)
- Tá»‘i Æ°u cho <= 6 ngÆ°á»i

### 3. Real-time Sync

Khi báº¡n báº­t/táº¯t camera hoáº·c mic:
```javascript
// Emit event qua socket
socket.emit('media:toggle-camera', { enabled: true })
socket.emit('media:toggle-mic', { enabled: true })

// CÃ¡c thÃ nh viÃªn khÃ¡c nháº­n event
socket.on('media:user-camera-changed', ({ userId, enabled }) => {
  // Cáº­p nháº­t UI
})
```

## ğŸ“± Responsive Design

### Desktop (> 1024px)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Participantsâ”‚    Video    â”‚   Chat      â”‚
â”‚   Panel     â”‚    Grid     â”‚   Panel     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Tablet/Mobile
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          Video Grid             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚          Chat Panel             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ› Troubleshooting

### Lá»—i: "Could not access camera/microphone"

**NguyÃªn nhÃ¢n:**
1. ChÆ°a cáº¥p quyá»n cho browser
2. Camera/Mic Ä‘ang Ä‘Æ°á»£c sá»­ dá»¥ng bá»Ÿi app khÃ¡c
3. KhÃ´ng cÃ³ camera/mic trÃªn thiáº¿t bá»‹

**Giáº£i phÃ¡p:**
1. Kiá»ƒm tra Settings â†’ Privacy â†’ Camera/Microphone
2. ÄÃ³ng cÃ¡c app khÃ¡c Ä‘ang dÃ¹ng camera/mic
3. Kiá»ƒm tra hardware

### Camera bá»‹ Ä‘en (Black Screen)

**NguyÃªn nhÃ¢n:**
- Video track bá»‹ disabled
- Stream Ä‘Ã£ bá»‹ stop

**Giáº£i phÃ¡p:**
- Click táº¯t rá»“i báº­t láº¡i camera
- Refresh trang náº¿u cáº§n

### KhÃ´ng nghe tháº¥y ngÆ°á»i khÃ¡c

**Kiá»ƒm tra:**
1. âœ… Volume cá»§a browser
2. âœ… Volume cá»§a há»‡ thá»‘ng
3. âœ… Remote peer cÃ³ báº­t mic khÃ´ng
4. âœ… Káº¿t ná»‘i WebRTC (check console logs)

## ğŸ” Debug

### Xem logs trong Console

```javascript
// Camera toggle
ğŸ¥ Starting stream with camera...
ğŸ“· Camera ON

// Mic toggle
ğŸ¤ Starting stream with microphone...
ğŸ¤ Microphone ON

// Remote state changes
ğŸ“· userId camera: ON
ğŸ¤ userId mic: OFF
```

### Kiá»ƒm tra Stream

```javascript
// Local stream
console.log('Local stream tracks:', localStream.getTracks());

// Remote streams
console.log('Remote streams:', remoteStreams);
```

## ğŸ’¡ Tips & Best Practices

### Cho GiÃ¡o ViÃªn (Teacher)

1. **LuÃ´n báº­t camera vÃ  mic** khi dáº¡y
2. **Sá»­ dá»¥ng screen share** khi cáº§n trÃ¬nh chiáº¿u
3. **Force mute students** khi cáº§n (click nÃºt ğŸ”‡ bÃªn cáº¡nh tÃªn student)
4. **Pin video** cá»§a student Ä‘ang phÃ¡t biá»ƒu

### Cho Há»c Sinh (Student)

1. **Táº¯t mic** khi khÃ´ng phÃ¡t biá»ƒu (trÃ¡nh nhiá»…u)
2. **Báº­t camera** khi giÃ¡o viÃªn yÃªu cáº§u
3. **GiÆ¡ tay** (âœ‹ button) trÆ°á»›c khi há»i
4. **Sá»­ dá»¥ng chat** náº¿u khÃ´ng muá»‘n má»Ÿ mic

## ğŸ“Š Performance

### Bandwidth Usage (Æ¯á»›c tÃ­nh)

| Quality    | Video     | Audio    | Total      |
|------------|-----------|----------|------------|
| HD (720p)  | 1.5 Mbps  | 50 Kbps  | ~1.6 Mbps  |
| SD (480p)  | 800 Kbps  | 50 Kbps  | ~850 Kbps  |
| Audio Only | 0 Kbps    | 50 Kbps  | ~50 Kbps   |

**Khuyáº¿n nghá»‹:**
- Tá»‘c Ä‘á»™ internet tá»‘i thiá»ƒu: **2 Mbps**
- Tá»‘c Ä‘á»™ khuyáº¿n nghá»‹: **5+ Mbps**

## ğŸ“ Cáº¥u TrÃºc Code

### useWebRTC Hook
```javascript
const {
  localStream,        // MediaStream cá»§a báº¡n
  remoteStreams,      // Map<userId, stream> cá»§a ngÆ°á»i khÃ¡c
  isMicOn,           // Boolean: mic cÃ³ báº­t khÃ´ng
  isCameraOn,        // Boolean: camera cÃ³ báº­t khÃ´ng
  toggleMicrophone,  // Function: báº­t/táº¯t mic
  toggleCamera,      // Function: báº­t/táº¯t camera
  ...
} = useWebRTC(joinToken);
```

### VideoGrid Component
```javascript
<VideoGrid
  localStream={localStream}
  remoteStreams={remoteStreams}
  isCameraOn={isCameraOn}
  isMicOn={isMicOn}
  participants={participants}
  ...
/>
```

## ğŸš€ Next Steps

CÃ¡c tÃ­nh nÄƒng cÃ³ thá»ƒ má»Ÿ rá»™ng:

1. âœ¨ **Virtual Background** - Thay Ä‘á»•i background áº£o
2. ğŸ¨ **Beauty Filters** - Bá»™ lá»c lÃ m Ä‘áº¹p
3. ğŸ“¹ **Recording** - Ghi láº¡i buá»•i há»c
4. ğŸ”Š **Audio Effects** - Hiá»‡u á»©ng Ã¢m thanh
5. ğŸ“Š **Network Stats** - Hiá»ƒn thá»‹ thá»‘ng kÃª káº¿t ná»‘i
6. ğŸŒ **Language Translation** - Dá»‹ch realtime

---

**PhiÃªn báº£n:** 1.0.0  
**NgÃ y cáº­p nháº­t:** 25/01/2026  
**TÃ¡c giáº£:** Edu Ecosystem Team
